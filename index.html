<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>x5capital</title>
  <link rel="icon" href="https://i.ibb.co/q3DYk2jr/Newx5logo.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- all -->
  <div class="wrapper">

  <!-- 漸層光暈 -->
  <div class="glow left-glow"></div>
  <div class="glow right-glow"></div>

  <!-- Navbar 導覽列 -->
  <nav class="navbar">
    <div class="navbar-left">
      <img src="x5logo.png" width="55" height="55" alt="fleek logo">
    </div>
    <div class="navbar-right">
      <a href="#">Product</a>
      <a href="#">Resources</a>
      <a href="#">Docs</a>
      <a href="#">Blog</a>
      <a href="#">你他媽</a>
      <button class="login-btn">Login</button>
    </div>
  </nav>

  <div class="divider"></div>

  <!-- Hero 區塊 -->
  <section class="hero">
    <div class="hero-content">
      <h1>x5capital Website</h1>
      <p>Build the new internet, your way.</p>
      <button class="cta-btn">Get Started</button>
    </div>
  </section>

  <!-- scroll-wrapper -->
  <div class="scroll-wrapper">
    <div class="gradient-fade left"></div>
    <div class="gradient-fade right"></div>

    <div class="scroll-track">
      <!-- Start -->
      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/bgZ0JFHF/KSJCAT.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">kiseiju</p>
            <div class="tag">Crypto</div>
          </div>
          <div class="social-grid">
            <a href="https://x.com/kiseiju1119" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="https://x.com/kiseiju1119" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="https://x.com/kiseiju1119" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/QF688WJR/BKZ2-EHYA-400x400.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">x5fkyou</p>
            <div class="tag">Crypto</div>
          </div>
          <div class="social-grid">
            <a href="https://x.com/nacl_x1ao5" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/Jw6HVpj9/Finchcat.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">finch</p>
            <div class="tag">操逼天尊</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/zhVn3ySP/Donk.jpg" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">我还在学习</p>
            <div class="tag">大黑急拔</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/MDLvbCyn/Mejicat.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">meji</p>
            <div class="tag">掃鏈超新星</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>
      <!-- End -->
      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/5xYndpDb/Cheescat2.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">王者起司</p>
            <div class="tag">騎士內閣</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/LVvrmWv/Lingocat.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">lingo</p>
            <div class="tag">Crypto</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/nNXK7j9r/HSIEH.jpg" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">HSIEH</p>
            <div class="tag">全能型選手</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/1JqM7m6r/image.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">幕後推手</p>
            <div class="tag">藏鏡人</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/F4s8g1y5/image.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">幕後推手2</p>
            <div class="tag">美女</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">妹子</p>
            <div class="tag">美女</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/BVy6cqsr/Kuma.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">Kuma</p>
            <div class="tag">戰術教練</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

    </div>
  </div>
  <!-- scroll-wrapper js -->
<script>
  const scrollWrapper = document.querySelector('.scroll-wrapper');
  const scrollTrack = document.querySelector('.scroll-track');

  // 複製一次內容，實現無縫滾動
  scrollTrack.innerHTML += scrollTrack.innerHTML;

  // 設定滾動參數
  let scrollAmount = scrollTrack.scrollWidth / 2;
  let currentScroll = 0;
  let isPaused = false;

  // 自動滾動動畫
  function animateScroll() {
    if (!isPaused) {
      currentScroll += 0.3; // 調整這邊控制速度
      if (currentScroll >= scrollAmount) {
        currentScroll = 0;
      }
      scrollTrack.style.transform = `translateX(-${currentScroll}px)`;
    }
    requestAnimationFrame(animateScroll);
  }

  // 滑鼠懸停暫停
  scrollWrapper.addEventListener('mouseenter', () => {
    isPaused = true;
  });

  scrollWrapper.addEventListener('mouseleave', () => {
    isPaused = false;
  });

  animateScroll();
</script>

  <div class="divider"></div>

  <!-- Trusted by 區塊 -->
  <section class="trusted-section">
    <h3 class="trusted-title">None of the following companies invested</h3>
    <div class="trusted-logos">
      <img src="https://fleek.xyz/images/landing-page/partners/coinbase.png" alt="Coinbase" loading="lazy" />
      <img src="https://i.ibb.co/k2xrkgvB/Binance.png" alt="Binance" loading="lazy" />
      <img src="https://i.ibb.co/xSmZ6smT/polychaincapital.png" alt="polychaincapital" loading="lazy" />
      <img src="https://i.ibb.co/4Z61fPB0/dcg.png" alt="dcg" loading="lazy" />
      <img src="https://i.ibb.co/1f4TYT6b/venice.png" alt="Venice" loading="lazy" />
    </div>
    <div class="divider-line bottom-line"></div>
  </section>

  <!-- FAQ 區塊 -->
  <section class="faq-section">
    <h2 class="faq-title">Frequently Asked Questions</h2>
  
    <div class="faq-item">
      <input type="checkbox" id="faq1">
      <label for="faq1" class="faq-question">什麼是 Web3？</label>
      <div class="faq-answer">騙子一堆。</div>
    </div>
  
    <div class="faq-item">
      <input type="checkbox" id="faq2">
      <label for="faq2" class="faq-question">你們支援哪些錢包？</label>
      <div class="faq-answer">支援你媽。</div>
    </div>
  
    <div class="faq-item">
      <input type="checkbox" id="faq3">
      <label for="faq3" class="faq-question">這網站是用什麼技術做的？</label>
      <div class="faq-answer">小寶純手打。</div>
    </div>

    <div class="faq-item">
        <input type="checkbox" id="faq4">
        <label for="faq4" class="faq-question">如何加入?</label>
        <div class="faq-answer">不歡迎坦克系女孩。</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq5">
        <label for="faq5" class="faq-question">bot?</label>
        <div class="faq-answer">Bot幫我買了8000sol。</div>
      </div>  

    <div class="faq-item">
        <input type="checkbox" id="faq6">
        <label for="faq6" class="faq-question">虎鞭?</label>
        <div class="faq-answer">美肌我的虎鞭呢。</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq7">
        <label for="faq7" class="faq-question">戰旗?</label>
        <div class="faq-answer">現在打就是要戰績好看的，就是他們在說的吃假分，我開服482名，版本號不一樣(百場卡鑽代打大師)。</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq8">
        <label for="faq8" class="faq-question">腦子?</label>
        <div class="faq-answer">欸欸 腦子嗡嗡的。</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq9">
        <label for="faq9" class="faq-question">牛子?</label>
        <div class="faq-answer">牛子酸酸的。</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq10">
        <label for="faq10" class="faq-question">腰子?</label>
        <div class="faq-answer">欸 腰子栓栓的怎麼辦(幫朋友問的不是我)。</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq11">
        <label for="faq11" class="faq-question">手冊?</label>
        <div class="faq-answer">我畫面左下角看不到。</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq12">
        <label for="faq12" class="faq-question">Flash?</label>
        <div class="faq-answer">我打閃你出去送（準心瞄地板）。</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq13">
        <label for="faq13" class="faq-question">Trump?</label>
        <div class="faq-answer">bot應該有幫我買。Trump又賺了20k。</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq14">
        <label for="faq14" class="faq-question">Sui?</label>
        <div class="faq-answer">台灣垃圾項目空死它。</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq15">
        <label for="faq15" class="faq-question">ARAM?</label>
        <div class="faq-answer">你說他為什麼不去玩坦克呢。</div>
      </div>
  </section> 

  <!-- all -->
  </div>

  <!-- Footer -->
  <footer class="footer">
    © 2025 X5 Capital. All rights reserved.
  </footer>

  <!-- ===== Gift Button & Modals & Wheel ===== -->
<div id="giftBtn" class="gift-btn" title="點我領禮物"></div>
<div id="giftHint" class="gift-hint">按住 <b>Shift</b> 拖曳可調位置</div>

<!-- 密碼輸入 Modal -->
<div id="pwdMask" class="modal-mask" role="dialog" aria-modal="true">
  <div class="modal">
    <h3>輸入禮物密碼</h3>
    <p>每組密碼僅能使用一次（刷新也不能重複操機掰）。</p>
    <div class="row">
      <input id="pwdInput" type="password" placeholder="輸入密碼" />
      <button id="pwdSubmit">解鎖</button>
    </div>
    <div class="row" style="margin-top:8px; justify-content:flex-end;">
      <button id="pwdCancel">取消</button>
    </div>
    <p id="pwdMsg" style="color:#ff8080; min-height:18px;"></p>
  </div>
</div>

<!-- 抽獎輪盤區 -->
<section id="wheelWrap" class="wheel-wrap">
  <div style="position:relative">
    <canvas id="wheelCanvas" class="wheel-canvas"></canvas>
    <div class="wheel-pointer"></div>
  </div>
  <button id="spinBtn" class="spin-btn">開始抽獎</button>
</section>

<!-- 中獎彈窗 Modal -->
<div id="winMask" class="modal-mask" role="dialog" aria-modal="true">
  <div class="modal win-popup">
    <h3 id="winTitle">恭喜中獎！</h3>
    <img id="winImg" src="" alt="prize"/>
    <p id="winDesc"></p>
    <div class="row" style="justify-content:center;margin-top:10px;">
      <button id="winOk">爽啦</button>
    </div>
  </div>
</div>

<!-- 抽獎輪盤 Modal（新增） -->
<div id="wheelMask" class="modal-mask wheel-modal" role="dialog" aria-modal="true">
  <div class="modal">
    <div id="wheelModalBody"></div>
    <div class="row" style="justify-content:center;margin-top:10px;">
      <button id="wheelClose">關閉</button>
    </div>
  </div>
</div>


<script>
/* ===================== 基本設定（你可以改） ===================== */
/** 一次性密碼清單（字串陣列）。部署時你可改由後端 API 檢查。 */
const VALID_CODES = [
  "x5-777", "x5-999", "x5-abc", "x5-1", "x5-2", "x5-3", "x5-4", "x5-5", "x5-6"  // ← 自行新增/修改
];

/** 抽獎獎項設定：label=名稱, weight=機率權重, img=中獎彈窗圖片, desc=描述 */
let PRIZES = [
  { label: "iPhone",   weight: 1,  img: "https://i.ibb.co/2hVsXbP/iphone.png", desc: "Airdrop 來啦～" },
  { label: "USDT 100", weight: 0,  img: "https://i.ibb.co/5RVdJb6/usdt.png",   desc: "加菜金100U" },
  { label: "貼圖包",   weight: 0,  img: "https://i.ibb.co/QmQ02yq/sticker.png", desc: "送你 Meme 貼圖" },
  { label: "安慰獎",   weight: 12, img: "https://i.ibb.co/dsxdwW5j/image.jpg",  desc: "下次一定中" }
];
// 小提示：總機率=權重總和，不需要 100；你只要調整 weight 比例即可。

/* ===================== 一次性密碼（本地持久化） ===================== */
/** 用 localStorage 記錄已使用密碼；刷新後仍不可再用 */
const USED_KEY = "gift_used_codes_v1";
function getUsedSet(){
  try{ return new Set(JSON.parse(localStorage.getItem(USED_KEY) || "[]")); }
  catch{ return new Set(); }
}
function saveUsedSet(set){
  localStorage.setItem(USED_KEY, JSON.stringify(Array.from(set)));
}

/* ===================== Gift 按鈕 & 可拖曳位置 ===================== */
const giftBtn = document.getElementById("giftBtn");
const giftHint = document.getElementById("giftHint");

// 位置儲存
const POS_KEY = "gift_pos_v1";
(function restorePos(){
  try{
    const pos = JSON.parse(localStorage.getItem(POS_KEY) || "{}");
    if(pos.top && pos.left){
      document.documentElement.style.setProperty('--gift-top', pos.top);
      document.documentElement.style.setProperty('--gift-left', pos.left);
    }
  }catch{}
})();

// Shift + 拖曳移動並存檔
let dragging = false, offset = {x:0,y:0};
giftBtn.addEventListener("mousedown", (e)=>{
  if(!e.shiftKey) return;
  dragging = true;
  giftBtn.classList.add("editing");
  const rect = giftBtn.getBoundingClientRect();
  offset.x = e.clientX - rect.left;
  offset.y = e.clientY - rect.top;
});
window.addEventListener("mousemove", (e)=>{
  if(!dragging) return;
  const x = e.clientX - offset.x;
  const y = e.clientY - offset.y;
  // 限制在視窗內
  const maxX = window.innerWidth - 64;
  const maxY = window.innerHeight - 64;
  const left = Math.max(0, Math.min(x, maxX));
  const top = Math.max(0, Math.min(y, maxY));
  const topPx = top + "px";
  const leftPx = left + "px";
  document.documentElement.style.setProperty('--gift-top', topPx);
  document.documentElement.style.setProperty('--gift-left', leftPx);
});
window.addEventListener("mouseup", ()=>{
  if(!dragging) return;
  dragging = false;
  giftBtn.classList.remove("editing");
  const top = getComputedStyle(document.documentElement).getPropertyValue('--gift-top').trim();
  const left = getComputedStyle(document.documentElement).getPropertyValue('--gift-left').trim();
  localStorage.setItem(POS_KEY, JSON.stringify({ top, left }));
});

giftBtn.addEventListener("click", (e)=>{
  if(e.shiftKey) return; // 編輯時不開啟
  openPwdModal();
});

/* ===================== 密碼 Modal ===================== */
const pwdMask = document.getElementById("pwdMask");
const pwdInput = document.getElementById("pwdInput");
const pwdSubmit = document.getElementById("pwdSubmit");
const pwdCancel = document.getElementById("pwdCancel");
const pwdMsg = document.getElementById("pwdMsg");

function openPwdModal(){
  pwdMask.style.display = "flex";
  pwdInput.value = "";
  pwdMsg.textContent = "";
  setTimeout(()=>pwdInput.focus(), 0);
}
function closePwdModal(){ pwdMask.style.display = "none"; }

pwdCancel.addEventListener("click", closePwdModal);
pwdMask.addEventListener("click", (e)=>{ if(e.target === pwdMask) closePwdModal(); });

pwdSubmit.addEventListener("click", handlePwd);
pwdInput.addEventListener("keydown", (e)=>{ if(e.key === "Enter") handlePwd(); });

function handlePwd(){
  const code = (pwdInput.value || "").trim();
  if(!code){ pwdMsg.textContent = "請輸入密碼"; return; }

  const used = getUsedSet();
  if(used.has(code)){
    pwdMsg.textContent = "這組密碼已經使用過了。";
    return;
  }
  if(!VALID_CODES.includes(code)){
    pwdMsg.textContent = "密碼錯誤或不存在。";
    return;
  }

  used.add(code);
  saveUsedSet(used);
  closePwdModal();
  revealWheel();
}

/* ===================== 輪盤繪製 & 抽獎邏輯 ===================== */
const wheelWrap = document.getElementById("wheelWrap");
const wheelCanvas = document.getElementById("wheelCanvas");
const spinBtn = document.getElementById("spinBtn");
const ctx = wheelCanvas.getContext("2d");

let currentAngle = 0;
let spinning = false;

function revealWheel(){
  // 1) 取出輪盤 Modal 容器
  const wheelMask = document.getElementById('wheelMask');
  const wheelBody = document.getElementById('wheelModalBody');

  // 2) 把原本頁面裡的輪盤區搬進 Modal 內
  wheelBody.innerHTML = '';
  wheelBody.appendChild(wheelWrap);

  // 3) 顯示輪盤並打開 Modal
  wheelWrap.style.display = "block";
  wheelMask.style.display = "flex";

  // 4) 調整畫布尺寸並重繪
  resizeCanvas();
  drawWheel();
}

function resizeCanvas(){
  const size = Math.min(520, Math.min(window.innerWidth*0.92, window.innerHeight*0.8));
  wheelCanvas.width = size * devicePixelRatio;
  wheelCanvas.height = size * devicePixelRatio;
  wheelCanvas.style.width = size + "px";
  wheelCanvas.style.height = size + "px";
  ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
}
window.addEventListener("resize", ()=>{ if(wheelWrap.style.display==="block"){ resizeCanvas(); drawWheel(); }});

function drawWheel(){
  const W = wheelCanvas.width / devicePixelRatio;
  const H = wheelCanvas.height / devicePixelRatio;
  const cx = W/2, cy = H/2;
  const margin = 18;                 // 邊界留白
  const r = Math.min(W,H)/2 - margin;
  const n = PRIZES.length;
  const twoPI = Math.PI * 2;
  const slice = twoPI / n;

  ctx.clearRect(0,0,W,H);
  ctx.save();
  ctx.translate(cx, cy);
  ctx.rotate(currentAngle);

  for (let i = 0; i < n; i++){
    const start = i * slice;
    const end   = start + slice;

    // 扇形底
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.arc(0,0,r, start, end);
    ctx.closePath();
    ctx.fillStyle = i % 2 ? "#202020" : "#252525";
    ctx.fill();
    ctx.strokeStyle = "#333";
    ctx.lineWidth = 2;
    ctx.stroke();

    // 文字：在該扇形中心線方向、半徑內側一點
    ctx.save();
    const mid = start + slice/2;
    ctx.rotate(mid);

    // 文字區最大寬度（避免靠邊被裁）
    const labelRadius = r - 48;   // 往內縮一圈放字
    const maxWidth = r * 0.7;     // 單行最大寬度
    const text = PRIZES[i].label;

    // 動態字級使其不超出
    let fontSize = 18;            // 起始字級
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    do {
      ctx.font = `${fontSize}px Segoe UI, system-ui, -apple-system`;
      if (ctx.measureText(text).width <= maxWidth || fontSize <= 12) break;
      fontSize -= 1;
    } while (true);

    ctx.fillStyle = "#ddd";
    // 將文字畫在圓心往外 labelRadius 的位置
    ctx.fillText(text, labelRadius, 0);
    ctx.restore();
  }

  // 中心圓
  ctx.beginPath();
  ctx.arc(0,0, 46, 0, twoPI);
  ctx.fillStyle="#111";
  ctx.fill();
  ctx.strokeStyle="#3a3a3a";
  ctx.stroke();

  ctx.restore();
}

function weightedPick(){
  const total = PRIZES.reduce((s,p)=>s+p.weight,0);
  let r = Math.random()*total;
  for (let i = 0; i < PRIZES.length; i++){
    const p = PRIZES[i];
    if (r < p.weight) return { prize: p, index: i };
    r -= p.weight;
  }
  return { prize: PRIZES[PRIZES.length-1], index: PRIZES.length-1 };
}

spinBtn.addEventListener("click", ()=>{
  if (spinning) return;
  spinning = true;
  spinBtn.disabled = true;

  const { prize: targetPrize, index: targetIndex } = weightedPick();

  const twoPI = Math.PI * 2;
  const n = PRIZES.length;
  const slice = twoPI / n;

  // 指針在 12 點方向（-90°）
  const pointerAngle = -Math.PI/2;

  // 該等分的「中線角度」
  const targetMidAngle = targetIndex * slice + slice/2;

  const current = ((currentAngle % twoPI) + twoPI) % twoPI;
  let delta = pointerAngle - (current + targetMidAngle);

  // 多轉幾圈再對準
  const extraTurns = 6 + Math.floor(Math.random()*3); // 6~8圈
  const finalDelta = delta + extraTurns*twoPI;

  const duration = 4500; // ms
  const t0 = performance.now();
  const startAngle = currentAngle;

  function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }

  function anim(now){
    const t = Math.min(1, (now - t0)/duration);
    const eased = easeOutCubic(t);
    currentAngle = startAngle + finalDelta*eased;
    drawWheel();
    if (t < 1) requestAnimationFrame(anim);
    else {
      spinning = false;
      spinBtn.disabled = false;
      currentAngle = startAngle + finalDelta; // 校正
      drawWheel();
      showWin(targetPrize); // 轉完立刻彈
    }
  }
  requestAnimationFrame(anim);
});

/* ===================== 中獎彈窗 ===================== */
const winMask = document.getElementById("winMask");
const winImg = document.getElementById("winImg");
const winDesc = document.getElementById("winDesc");
const winTitle = document.getElementById("winTitle");
const winOk = document.getElementById("winOk");

function showWin(prize){
  winTitle.textContent = `恭喜抽中：${prize.label}`;
  winImg.src = prize.img || "";
  winDesc.textContent = prize.desc || "";
  winMask.style.display = "flex";
}
winOk.addEventListener("click", ()=> winMask.style.display = "none");
winMask.addEventListener("click", (e)=>{ if(e.target===winMask) winMask.style.display="none"; });

// 關閉輪盤 Modal
document.getElementById('wheelClose').addEventListener('click', ()=>{
  document.getElementById('wheelMask').style.display = 'none';
});

// 點遮罩也可關閉
document.getElementById('wheelMask').addEventListener('click', (e)=>{
  if(e.target.id === 'wheelMask') e.target.style.display = 'none';
});

</script>

</body>
</html>






