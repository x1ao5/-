<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>x5capital</title>
  <link rel="icon" href="https://i.ibb.co/q3DYk2jr/Newx5logo.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- all -->
  <div class="wrapper">

  <!-- æ¼¸å±¤å…‰æšˆ -->
  <div class="glow left-glow"></div>
  <div class="glow right-glow"></div>

  <!-- Navbar å°è¦½åˆ— -->
  <nav class="navbar">
    <div class="navbar-left">
      <img src="x5logo.png" width="55" height="55" alt="fleek logo">
    </div>
    <div class="navbar-right">
      <a href="#">Product</a>
      <a href="#">Resources</a>
      <a href="#">Docs</a>
      <a href="#">Blog</a>
      <a href="#">ä½ ä»–åª½</a>
      <button class="login-btn">Login</button>
    </div>
  </nav>

  <div class="divider"></div>

  <!-- Hero å€å¡Š -->
  <section class="hero">
    <div class="hero-content">
      <h1>x5capital Website</h1>
      <p>Build the new internet, your way.</p>
      <button class="cta-btn">Get Started</button>
    </div>
  </section>

  <!-- scroll-wrapper -->
  <div class="scroll-wrapper">
    <div class="gradient-fade left"></div>
    <div class="gradient-fade right"></div>

    <div class="scroll-track">
      <!-- Start -->
      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/bgZ0JFHF/KSJCAT.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">kiseiju</p>
            <div class="tag">Crypto</div>
          </div>
          <div class="social-grid">
            <a href="https://x.com/kiseiju1119" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="https://x.com/kiseiju1119" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="https://x.com/kiseiju1119" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/QF688WJR/BKZ2-EHYA-400x400.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">x5fkyou</p>
            <div class="tag">Crypto</div>
          </div>
          <div class="social-grid">
            <a href="https://x.com/nacl_x1ao5" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/Jw6HVpj9/Finchcat.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">finch</p>
            <div class="tag">æ“é€¼å¤©å°Š</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/zhVn3ySP/Donk.jpg" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">æˆ‘è¿˜åœ¨å­¦ä¹ </p>
            <div class="tag">å¤§é»‘æ€¥æ‹”</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/MDLvbCyn/Mejicat.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">meji</p>
            <div class="tag">æƒéˆè¶…æ–°æ˜Ÿ</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>
      <!-- End -->
      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/5xYndpDb/Cheescat2.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">ç‹è€…èµ·å¸</p>
            <div class="tag">é¨å£«å…§é–£</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/LVvrmWv/Lingocat.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">lingo</p>
            <div class="tag">Crypto</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/nNXK7j9r/HSIEH.jpg" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">HSIEH</p>
            <div class="tag">å…¨èƒ½å‹é¸æ‰‹</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/1JqM7m6r/image.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">å¹•å¾Œæ¨æ‰‹</p>
            <div class="tag">è—é¡äºº</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/F4s8g1y5/image.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">å¹•å¾Œæ¨æ‰‹2</p>
            <div class="tag">ç¾å¥³</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">å¦¹å­</p>
            <div class="tag">ç¾å¥³</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

      <div class="profile-card">
        <div class="avatar">
          <img src="https://i.ibb.co/BVy6cqsr/Kuma.png" alt="avatar" />
        </div>
        <div class="profile-info">
          <div class="profile-header">
            <p class="name">Kuma</p>
            <div class="tag">æˆ°è¡“æ•™ç·´</div>
          </div>
          <div class="social-grid">
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/x.svg" alt="X Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/instagram.svg" alt="Instagram Logo" /></a>
            <a href="#" class="social-button"><img src="https://fleek.xyz/images/landing-page/templates/socials/tiktok.svg" alt="TikTok Logo" /></a>
          </div>
        </div>
      </div>

    </div>
  </div>
  <!-- scroll-wrapper js -->
<script>
  const scrollWrapper = document.querySelector('.scroll-wrapper');
  const scrollTrack = document.querySelector('.scroll-track');

  // è¤‡è£½ä¸€æ¬¡å…§å®¹ï¼Œå¯¦ç¾ç„¡ç¸«æ»¾å‹•
  scrollTrack.innerHTML += scrollTrack.innerHTML;

  // è¨­å®šæ»¾å‹•åƒæ•¸
  let scrollAmount = scrollTrack.scrollWidth / 2;
  let currentScroll = 0;
  let isPaused = false;

  // è‡ªå‹•æ»¾å‹•å‹•ç•«
  function animateScroll() {
    if (!isPaused) {
      currentScroll += 0.3; // èª¿æ•´é€™é‚Šæ§åˆ¶é€Ÿåº¦
      if (currentScroll >= scrollAmount) {
        currentScroll = 0;
      }
      scrollTrack.style.transform = `translateX(-${currentScroll}px)`;
    }
    requestAnimationFrame(animateScroll);
  }

  // æ»‘é¼ æ‡¸åœæš«åœ
  scrollWrapper.addEventListener('mouseenter', () => {
    isPaused = true;
  });

  scrollWrapper.addEventListener('mouseleave', () => {
    isPaused = false;
  });

  animateScroll();
</script>

  <div class="divider"></div>

  <!-- Trusted by å€å¡Š -->
  <section class="trusted-section">
    <h3 class="trusted-title">None of the following companies invested</h3>
    <div class="trusted-logos">
      <img src="https://fleek.xyz/images/landing-page/partners/coinbase.png" alt="Coinbase" loading="lazy" />
      <img src="https://i.ibb.co/k2xrkgvB/Binance.png" alt="Binance" loading="lazy" />
      <img src="https://i.ibb.co/xSmZ6smT/polychaincapital.png" alt="polychaincapital" loading="lazy" />
      <img src="https://i.ibb.co/4Z61fPB0/dcg.png" alt="dcg" loading="lazy" />
      <img src="https://i.ibb.co/1f4TYT6b/venice.png" alt="Venice" loading="lazy" />
    </div>
    <div class="divider-line bottom-line"></div>
  </section>

  <!-- FAQ å€å¡Š -->
  <section class="faq-section">
    <h2 class="faq-title">Frequently Asked Questions</h2>
  
    <div class="faq-item">
      <input type="checkbox" id="faq1">
      <label for="faq1" class="faq-question">ä»€éº¼æ˜¯ Web3ï¼Ÿ</label>
      <div class="faq-answer">é¨™å­ä¸€å †ã€‚</div>
    </div>
  
    <div class="faq-item">
      <input type="checkbox" id="faq2">
      <label for="faq2" class="faq-question">ä½ å€‘æ”¯æ´å“ªäº›éŒ¢åŒ…ï¼Ÿ</label>
      <div class="faq-answer">æ”¯æ´ä½ åª½ã€‚</div>
    </div>
  
    <div class="faq-item">
      <input type="checkbox" id="faq3">
      <label for="faq3" class="faq-question">é€™ç¶²ç«™æ˜¯ç”¨ä»€éº¼æŠ€è¡“åšçš„ï¼Ÿ</label>
      <div class="faq-answer">å°å¯¶ç´”æ‰‹æ‰“ã€‚</div>
    </div>

    <div class="faq-item">
        <input type="checkbox" id="faq4">
        <label for="faq4" class="faq-question">å¦‚ä½•åŠ å…¥?</label>
        <div class="faq-answer">ä¸æ­¡è¿å¦å…‹ç³»å¥³å­©ã€‚</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq5">
        <label for="faq5" class="faq-question">bot?</label>
        <div class="faq-answer">Botå¹«æˆ‘è²·äº†8000solã€‚</div>
      </div>  

    <div class="faq-item">
        <input type="checkbox" id="faq6">
        <label for="faq6" class="faq-question">è™é­?</label>
        <div class="faq-answer">ç¾è‚Œæˆ‘çš„è™é­å‘¢ã€‚</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq7">
        <label for="faq7" class="faq-question">æˆ°æ——?</label>
        <div class="faq-answer">ç¾åœ¨æ‰“å°±æ˜¯è¦æˆ°ç¸¾å¥½çœ‹çš„ï¼Œå°±æ˜¯ä»–å€‘åœ¨èªªçš„åƒå‡åˆ†ï¼Œæˆ‘é–‹æœ482åï¼Œç‰ˆæœ¬è™Ÿä¸ä¸€æ¨£(ç™¾å ´å¡é‘½ä»£æ‰“å¤§å¸«)ã€‚</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq8">
        <label for="faq8" class="faq-question">è…¦å­?</label>
        <div class="faq-answer">æ¬¸æ¬¸ è…¦å­å—¡å—¡çš„ã€‚</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq9">
        <label for="faq9" class="faq-question">ç‰›å­?</label>
        <div class="faq-answer">ç‰›å­é…¸é…¸çš„ã€‚</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq10">
        <label for="faq10" class="faq-question">è…°å­?</label>
        <div class="faq-answer">æ¬¸ è…°å­æ “æ “çš„æ€éº¼è¾¦(å¹«æœ‹å‹å•çš„ä¸æ˜¯æˆ‘)ã€‚</div>
      </div>
      
    <div class="faq-item">
        <input type="checkbox" id="faq11">
        <label for="faq11" class="faq-question">æ‰‹å†Š?</label>
        <div class="faq-answer">æˆ‘ç•«é¢å·¦ä¸‹è§’çœ‹ä¸åˆ°ã€‚</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq12">
        <label for="faq12" class="faq-question">Flash?</label>
        <div class="faq-answer">æˆ‘æ‰“é–ƒä½ å‡ºå»é€ï¼ˆæº–å¿ƒç„åœ°æ¿ï¼‰ã€‚</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq13">
        <label for="faq13" class="faq-question">Trump?</label>
        <div class="faq-answer">botæ‡‰è©²æœ‰å¹«æˆ‘è²·ã€‚Trumpåˆè³ºäº†20kã€‚</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq14">
        <label for="faq14" class="faq-question">Sui?</label>
        <div class="faq-answer">å°ç£åƒåœ¾é …ç›®ç©ºæ­»å®ƒã€‚</div>
      </div>

    <div class="faq-item">
        <input type="checkbox" id="faq15">
        <label for="faq15" class="faq-question">ARAM?</label>
        <div class="faq-answer">ä½ èªªä»–ç‚ºä»€éº¼ä¸å»ç©å¦å…‹å‘¢ã€‚</div>
      </div>
  </section> 

  <!-- all -->
  </div>

  <!-- Footer -->
  <footer class="footer">
    Â© 2025 X5 Capital. All rights reserved.
  </footer>

  <!-- ===== Gift Button & Modals & Wheel ===== -->
<div id="giftBtn" class="gift-btn" title="é»æˆ‘é ˜ç¦®ç‰©"></div>
<div id="giftHint" class="gift-hint">æŒ‰ä½ <b>Shift</b> æ‹–æ›³å¯èª¿ä½ç½®</div>

<!-- å¯†ç¢¼è¼¸å…¥ Modal -->
<div id="pwdMask" class="modal-mask" role="dialog" aria-modal="true">
  <div class="modal">
    <h3>è¼¸å…¥ç¦®ç‰©å¯†ç¢¼</h3>
    <p>æ¯çµ„å¯†ç¢¼åƒ…èƒ½ä½¿ç”¨ä¸€æ¬¡ï¼ˆåˆ·æ–°ä¹Ÿä¸èƒ½é‡è¤‡æ“æ©Ÿæ°ï¼‰ã€‚</p>
    <div class="row">
      <input id="pwdInput" type="password" placeholder="è¼¸å…¥å¯†ç¢¼" />
      <button id="pwdSubmit">è§£é–</button>
    </div>
    <div class="row" style="margin-top:8px; justify-content:flex-end;">
      <button id="pwdCancel">å–æ¶ˆ</button>
    </div>
    <p id="pwdMsg" style="color:#ff8080; min-height:18px;"></p>
  </div>
</div>

<!-- æŠ½çè¼ªç›¤å€ -->
<section id="wheelWrap" class="wheel-wrap">
  <div style="position:relative">
    <canvas id="wheelCanvas" class="wheel-canvas"></canvas>
    <div class="wheel-pointer"></div>
  </div>
  <button id="spinBtn" class="spin-btn">é–‹å§‹æŠ½ç</button>
</section>

<!-- ä¸­çå½ˆçª— Modal -->
<div id="winMask" class="modal-mask" role="dialog" aria-modal="true">
  <div class="modal win-popup">
    <h3 id="winTitle">æ­å–œä¸­çï¼</h3>
    <img id="winImg" src="" alt="prize"/>
    <p id="winDesc"></p>
    <div class="row" style="justify-content:center;margin-top:10px;">
      <button id="winOk">çˆ½å•¦</button>
    </div>
  </div>
</div>

<!-- æŠ½çè¼ªç›¤ Modalï¼ˆæ–°å¢ï¼‰ -->
<div id="wheelMask" class="modal-mask wheel-modal" role="dialog" aria-modal="true">
  <div class="modal">
    <div id="wheelModalBody"></div>
    <div class="row" style="justify-content:center;margin-top:10px;">
      <button id="wheelClose">é—œé–‰</button>
    </div>
  </div>
</div>


<script>
/* ===================== åŸºæœ¬è¨­å®šï¼ˆä½ å¯ä»¥æ”¹ï¼‰ ===================== */
/** ä¸€æ¬¡æ€§å¯†ç¢¼æ¸…å–®ï¼ˆå­—ä¸²é™£åˆ—ï¼‰ã€‚éƒ¨ç½²æ™‚ä½ å¯æ”¹ç”±å¾Œç«¯ API æª¢æŸ¥ã€‚ */
const VALID_CODES = [
  "x5-1", "x5-2", "x5-3", "x5-4", "x5-5", "x5-6"  // â† è‡ªè¡Œæ–°å¢/ä¿®æ”¹
];

/** æŠ½ççé …è¨­å®šï¼šlabel=åç¨±, weight=æ©Ÿç‡æ¬Šé‡, img=ä¸­çå½ˆçª—åœ–ç‰‡, desc=æè¿° */
let PRIZES = [
  { label: "BTC",   weight: 0,  img: "https://i.ibb.co/2hVsXbP/iphone.png", desc: "" },
  { label: "ETH", weight: 0,  img: "https://i.ibb.co/5RVdJb6/usdt.png",   desc: "" },
  { label: "SOL",   weight: 0,  img: "https://i.ibb.co/QmQ02yq/sticker.png", desc: "" },
  { label: "BNB",   weight: 0,  img: "https://i.ibb.co/QmQ02yq/sticker.png", desc: "" },
  { label: "ADA",   weight: 12, img: "https://i.ibb.co/dsxdwW5j/image.jpg",  desc: "ç”Ÿæ—¥å¿«æ¨‚" }
];
// å°æç¤ºï¼šç¸½æ©Ÿç‡=æ¬Šé‡ç¸½å’Œï¼Œä¸éœ€è¦ 100ï¼›ä½ åªè¦èª¿æ•´ weight æ¯”ä¾‹å³å¯ã€‚

/* ===================== ä¸€æ¬¡æ€§å¯†ç¢¼ï¼ˆæœ¬åœ°æŒä¹…åŒ–ï¼‰ ===================== */
/** ç”¨ localStorage è¨˜éŒ„å·²ä½¿ç”¨å¯†ç¢¼ï¼›åˆ·æ–°å¾Œä»ä¸å¯å†ç”¨ */
const USED_KEY = "gift_used_codes_v1";
function getUsedSet(){
  try{ return new Set(JSON.parse(localStorage.getItem(USED_KEY) || "[]")); }
  catch{ return new Set(); }
}
function saveUsedSet(set){
  localStorage.setItem(USED_KEY, JSON.stringify(Array.from(set)));
}

/* ===================== Gift æŒ‰éˆ• & å¯æ‹–æ›³ä½ç½® ===================== */
const giftBtn = document.getElementById("giftBtn");
const giftHint = document.getElementById("giftHint");

// ä½ç½®å„²å­˜
const POS_KEY = "gift_pos_v1";
(function restorePos(){
  try{
    const pos = JSON.parse(localStorage.getItem(POS_KEY) || "{}");
    if(pos.top && pos.left){
      document.documentElement.style.setProperty('--gift-top', pos.top);
      document.documentElement.style.setProperty('--gift-left', pos.left);
    }
  }catch{}
})();

// Shift + æ‹–æ›³ç§»å‹•ä¸¦å­˜æª”
let dragging = false, offset = {x:0,y:0};
giftBtn.addEventListener("mousedown", (e)=>{
  if(!e.shiftKey) return;
  dragging = true;
  giftBtn.classList.add("editing");
  const rect = giftBtn.getBoundingClientRect();
  offset.x = e.clientX - rect.left;
  offset.y = e.clientY - rect.top;
});
window.addEventListener("mousemove", (e)=>{
  if(!dragging) return;
  const x = e.clientX - offset.x;
  const y = e.clientY - offset.y;
  // é™åˆ¶åœ¨è¦–çª—å…§
  const maxX = window.innerWidth - 64;
  const maxY = window.innerHeight - 64;
  const left = Math.max(0, Math.min(x, maxX));
  const top = Math.max(0, Math.min(y, maxY));
  const topPx = top + "px";
  const leftPx = left + "px";
  document.documentElement.style.setProperty('--gift-top', topPx);
  document.documentElement.style.setProperty('--gift-left', leftPx);
});
window.addEventListener("mouseup", ()=>{
  if(!dragging) return;
  dragging = false;
  giftBtn.classList.remove("editing");
  const top = getComputedStyle(document.documentElement).getPropertyValue('--gift-top').trim();
  const left = getComputedStyle(document.documentElement).getPropertyValue('--gift-left').trim();
  localStorage.setItem(POS_KEY, JSON.stringify({ top, left }));
});

giftBtn.addEventListener("click", (e)=>{
  if(e.shiftKey) return; // ç·¨è¼¯æ™‚ä¸é–‹å•Ÿ
  openPwdModal();
});

/* ===================== å¯†ç¢¼ Modal ===================== */
const pwdMask = document.getElementById("pwdMask");
const pwdInput = document.getElementById("pwdInput");
const pwdSubmit = document.getElementById("pwdSubmit");
const pwdCancel = document.getElementById("pwdCancel");
const pwdMsg = document.getElementById("pwdMsg");

function openPwdModal(){
  pwdMask.style.display = "flex";
  pwdInput.value = "";
  pwdMsg.textContent = "";
  setTimeout(()=>pwdInput.focus(), 0);
}
function closePwdModal(){ pwdMask.style.display = "none"; }

pwdCancel.addEventListener("click", closePwdModal);
pwdMask.addEventListener("click", (e)=>{ if(e.target === pwdMask) closePwdModal(); });

pwdSubmit.addEventListener("click", handlePwd);
pwdInput.addEventListener("keydown", (e)=>{ if(e.key === "Enter") handlePwd(); });

function handlePwd(){
  const code = (pwdInput.value || "").trim();
  if(!code){ pwdMsg.textContent = "è«‹è¼¸å…¥å¯†ç¢¼"; return; }

  const used = getUsedSet();
  if(used.has(code)){
    pwdMsg.textContent = "é€™çµ„å¯†ç¢¼å·²ç¶“ä½¿ç”¨éäº†ã€‚";
    return;
  }
  if(!VALID_CODES.includes(code)){
    pwdMsg.textContent = "å¯†ç¢¼éŒ¯èª¤æˆ–ä¸å­˜åœ¨ã€‚";
    return;
  }

  used.add(code);
  saveUsedSet(used);
  closePwdModal();
  revealWheel();
}

/* ===================== è¼ªç›¤ç¹ªè£½ & æŠ½çé‚è¼¯ ===================== */
const wheelWrap = document.getElementById("wheelWrap");
const wheelCanvas = document.getElementById("wheelCanvas");
const spinBtn = document.getElementById("spinBtn");
const ctx = wheelCanvas.getContext("2d");

let currentAngle = 0;
let spinning = false;
let drawLocked = false;

function revealWheel(){
  // 1) å–å‡ºè¼ªç›¤ Modal å®¹å™¨
  const wheelMask = document.getElementById('wheelMask');
  const wheelBody = document.getElementById('wheelModalBody');

  // 2) æŠŠåŸæœ¬é é¢è£¡çš„è¼ªç›¤å€æ¬é€² Modal å…§
  wheelBody.innerHTML = '';
  wheelBody.appendChild(wheelWrap);

  // 3) é¡¯ç¤ºè¼ªç›¤ä¸¦æ‰“é–‹ Modal
  wheelWrap.style.display = "block";
  wheelMask.style.display = "flex";

  // ğŸ” é‡ç½®ä¸€æ¬¡æ€§æŠ½çç‹€æ…‹ï¼ˆæ–°çš„å¯†ç¢¼ï¼æ–°çš„æ©Ÿæœƒï¼‰
  drawLocked = false;
  spinBtn.disabled = false;
  spinBtn.classList.remove('done');
  spinBtn.textContent = 'é–‹å§‹æŠ½ç';

  // 4) ç•«å¸ƒèª¿æ•´
  resizeCanvas();
  drawWheel();
}

function resizeCanvas(){
  const size = Math.min(520, Math.min(window.innerWidth*0.92, window.innerHeight*0.8));
  wheelCanvas.width = size * devicePixelRatio;
  wheelCanvas.height = size * devicePixelRatio;
  wheelCanvas.style.width = size + "px";
  wheelCanvas.style.height = size + "px";
  ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
}
window.addEventListener("resize", ()=>{ if(wheelWrap.style.display==="block"){ resizeCanvas(); drawWheel(); }});

function drawWheel(){
  const W = wheelCanvas.width / devicePixelRatio;
  const H = wheelCanvas.height / devicePixelRatio;
  const cx = W/2, cy = H/2;
  const margin = 18;                 // é‚Šç•Œç•™ç™½
  const r = Math.min(W,H)/2 - margin;
  const n = PRIZES.length;
  const twoPI = Math.PI * 2;
  const slice = twoPI / n;

  ctx.clearRect(0,0,W,H);
  ctx.save();
  ctx.translate(cx, cy);
  ctx.rotate(currentAngle);

  for (let i = 0; i < n; i++){
    const start = i * slice;
    const end   = start + slice;

    // æ‰‡å½¢åº•
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.arc(0,0,r, start, end);
    ctx.closePath();
    ctx.fillStyle = i % 2 ? "#202020" : "#252525";
    ctx.fill();
    ctx.strokeStyle = "#333";
    ctx.lineWidth = 2;
    ctx.stroke();

    // æ–‡å­—ï¼šåœ¨è©²æ‰‡å½¢ä¸­å¿ƒç·šæ–¹å‘ã€åŠå¾‘å…§å´ä¸€é»
    ctx.save();
    const mid = start + slice/2;
    ctx.rotate(mid);

    // æ–‡å­—å€æœ€å¤§å¯¬åº¦ï¼ˆé¿å…é é‚Šè¢«è£ï¼‰
    const labelRadius = r - 48;   // å¾€å…§ç¸®ä¸€åœˆæ”¾å­—
    const maxWidth = r * 0.7;     // å–®è¡Œæœ€å¤§å¯¬åº¦
    const text = PRIZES[i].label;

    // å‹•æ…‹å­—ç´šä½¿å…¶ä¸è¶…å‡º
    let fontSize = 18;            // èµ·å§‹å­—ç´š
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    do {
      ctx.font = `${fontSize}px Segoe UI, system-ui, -apple-system`;
      if (ctx.measureText(text).width <= maxWidth || fontSize <= 12) break;
      fontSize -= 1;
    } while (true);

    ctx.fillStyle = "#ddd";
    // å°‡æ–‡å­—ç•«åœ¨åœ“å¿ƒå¾€å¤– labelRadius çš„ä½ç½®
    ctx.fillText(text, labelRadius, 0);
    ctx.restore();
  }

  // ä¸­å¿ƒåœ“
  ctx.beginPath();
  ctx.arc(0,0, 46, 0, twoPI);
  ctx.fillStyle="#111";
  ctx.fill();
  ctx.strokeStyle="#3a3a3a";
  ctx.stroke();

  ctx.restore();
}

function weightedPick(){
  const total = PRIZES.reduce((s,p)=>s+p.weight,0);
  let r = Math.random()*total;
  for (let i = 0; i < PRIZES.length; i++){
    const p = PRIZES[i];
    if (r < p.weight) return { prize: p, index: i };
    r -= p.weight;
  }
  return { prize: PRIZES[PRIZES.length-1], index: PRIZES.length-1 };
}

spinBtn.addEventListener("click", ()=>{
  if (spinning || drawLocked) return; // â† ä¸èƒ½é‡è¤‡æŠ½
  spinning = true;
  spinBtn.disabled = true;

  const { prize: targetPrize, index: targetIndex } = weightedPick();

  const twoPI = Math.PI * 2;
  const n = PRIZES.length;
  const slice = twoPI / n;

  // æŒ‡é‡åœ¨ 12 é»æ–¹å‘ï¼ˆ-90Â°ï¼‰
  const pointerAngle = -Math.PI/2;

  // è©²ç­‰åˆ†çš„ã€Œä¸­ç·šè§’åº¦ã€
  const targetMidAngle = targetIndex * slice + slice/2;

  const current = ((currentAngle % twoPI) + twoPI) % twoPI;
  let delta = pointerAngle - (current + targetMidAngle);

  // å¤šè½‰å¹¾åœˆå†å°æº–
  const extraTurns = 6 + Math.floor(Math.random()*3); // 6~8åœˆ
  const finalDelta = delta + extraTurns*twoPI;

  const duration = 4500; // ms
  const t0 = performance.now();
  const startAngle = currentAngle;

  function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }

  function anim(now){
    const t = Math.min(1, (now - t0)/duration);
    const eased = easeOutCubic(t);
    currentAngle = startAngle + finalDelta*eased;
    drawWheel();
    if (t < 1) requestAnimationFrame(anim);
    else {
      spinning = false;
      spinBtn.disabled = false;
      currentAngle = startAngle + finalDelta; // æ ¡æ­£
      drawWheel();
      showWin(targetPrize); // è½‰å®Œç«‹åˆ»å½ˆ
            // ğŸ”’ é–æ­»ï¼Œä¸èƒ½å†æŠ½
      drawLocked = true;
      spinBtn.disabled = true;
      spinBtn.classList.add('done');
      spinBtn.textContent = 'æŠ½çå·²å®Œæˆ';
    }
  }
  requestAnimationFrame(anim);
});

/* ===================== ä¸­çå½ˆçª— ===================== */
const winMask = document.getElementById("winMask");
const winImg = document.getElementById("winImg");
const winDesc = document.getElementById("winDesc");
const winTitle = document.getElementById("winTitle");
const winOk = document.getElementById("winOk");

function showWin(prize){
  winTitle.textContent = `æ­å–œæŠ½ä¸­ï¼š${prize.label}`;
  winImg.src = prize.img || "";
  winDesc.textContent = prize.desc || "";
  winMask.style.display = "flex";
}

// é—œé–‰è¼ªç›¤ Modal
document.getElementById('wheelClose').addEventListener('click', ()=>{
  document.getElementById('wheelMask').style.display = 'none';
});

// é»é®ç½©ä¹Ÿå¯é—œé–‰
document.getElementById('wheelMask').addEventListener('click', (e)=>{
  if(e.target.id === 'wheelMask') e.target.style.display = 'none';
});
